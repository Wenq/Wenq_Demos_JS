# 2024/1/18 今年要读完这本书并做笔记

### 2024/4/9
读自序：
作者：司徒正美，在2021年左右已经不在了。
阅读了前言，看到作者的一些想法阐述，部分跟现在团队里一个同事对我的“叮嘱”一样的：职场重要的是不可替代性，而不是只是高效率的做事，这也是职场人的护城河。

`作者还说了很多其他有意思的想法，我未列在笔记里：包括技术，个人发展等相关`

### 2024/4/10
读前言：
介绍了js、js相关不同框架和库的发展。
好像是在介绍如果自己要编写js框架，则基于当时的时间点结合行业里其他框架特点及流行内容，那你自己编写的框架需要支持哪些特性等。

===============
`本书目录`：
第1章 种子模块
第2章 模块加载系统
第3章 语言模块
第4章 浏览器嗅探与特征侦测
第5章 类工厂
第6章 选择器引擎
第7章 节点模块
第8章 数据缓存系统
第9章 样式模块
第10章 属性模块
第11章 事件系统
第12章 异步处理
第13章 数据交互模块
第14章 动画引擎
第15章 插件化
    jQuery插件
第16章 MVVM
    MVVM设计模式

共16个章节。
================
第3章 语言模块
### 2024/4/14


# 第12章 异步处理
`提前看这一章的原因`： 因为看到了“setTimeout”关键字，而我们实际cosmic项目中该关键字使用次数较多，而且又是还偶尔会暴露场景覆盖不全存在的一些问题。隐隐觉得现在项目中大量使用setTimeout存储一些隐患，固先查阅该章节。

什么时候需要使用异步？
1、逻辑消耗巨大，防止堵塞线程。
2、想人为降低逻辑执行速度（比如在UI上展现每一个快速操作步骤）
3、等待资源加载完成后调用回调处理逻辑，需要异步等待

浏览器的异步API：
阶段1 - setTimeout、setInterval
阶段2 - 各种事件回调
阶段3 - XMLHttpRequest、postMessage、webWorker、等等
（还有await等这里没有提到，不知道是不是因为这本书时间早的原因？）

`早期的网页动画`也是通过setTimeout/setInterval在回调里不断小范围调整样式来实现的。

回调地狱（callbackhell），是一个技能。一种模式：解决数据和模版渲染问题（两者要同时加载完成前端页面才能渲染）。

“几乎js中的所有异步函数都用到了回调，连续执行几个异步函数的结果就是层层嵌套的回调函数，随之而来的复杂代码。”

js是单线程语言，try...catch只能捕获当前抛出的异常。如果是异步函数中抛出的异常，则捕捉不到。
```javascript
//异步函数中的异常无法在主调用函数中去捕获（也就是说异步函数中异常只能在异步函数中去处理，外面无法处理）
function throwError(){
    throw new Error('ERROR');
}
try(
    //3s钟之后异步执行函数throwError
    setTimeout(throwError, 3000);
)catch(e){
    alert(e); //这里的异常无法捕获（因为throwError函数是在异步中执行的，非当前函数）
}
```
## setTimeout与setInterval

